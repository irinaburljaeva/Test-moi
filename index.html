<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–æ–ø–∏–ª–∫–∞-—Å—é—Ä–ø—Ä–∏–∑ üéÅ</title>
  <style>
    body {
      margin: 0;
      padding: 2rem;
      font-family: sans-serif;
      background: #fff5f5;
      text-align: center;
    }
    h1, h2, p { margin: 0.5rem 0; }
    .button {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      background: #e85d04;
      color: #fff;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    .piggy-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 1rem auto;
      font-size: 200px;
      line-height: 200px;
      user-select: none;
      cursor: pointer;
    }
    .shake {
      animation: shake 0.2s;
    }
    @keyframes shake {
      0%   { transform: translate(0,0); }
      25%  { transform: translate(3px,-2px); }
      50%  { transform: translate(-3px,2px); }
      75%  { transform: translate(2px,-3px); }
      100% { transform: translate(0,0); }
    }
    .crack-line {
      position: absolute;
      width: 2px;
      height: 120px;
      background: rgba(0,0,0,0.3);
      top: 40px;
      left: 50%;
      transform-origin: top center;
      pointer-events: none;
    }
    img.qr {
      width: 220px; height: 220px;
      border: 2px solid #ccc;
      border-radius: 1rem;
      margin-top: 1rem;
    }
    .messages {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 2px dashed #ccc;
      text-align: left;
      max-width: 600px;
      margin: 0 auto;
    }
  </style>
</head>
<body>

  <div id="app"></div>

  <script>
    (function(){
      const maxClicks = 10;
      let stage = 0;
      let shaking = false;
      const app = document.getElementById('app');

      function render() {
        app.innerHTML = '';

        // 1. –°—Ç–∞—Ä—Ç
        if (stage === 0) {
          app.innerHTML = `
            <h1>–Ø—Ä–æ—Å–ª–∞–≤, –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å–æ —Å–≤–∞–¥—å–±–æ–π!</h1>
            <p>–ü—É—Å—Ç—å –∂–∏–∑–Ω—å –≤ —Ä–æ–ª–∏ –º—É–∂–∞ –±—É–¥–µ—Ç —Å–∫–∞–∑–∫–æ–π!</p>
            <button class="button" id="startBtn">–ö –ø–æ–¥–∞—Ä–æ—á–∫—É üéÅ</button>
          `;
          document.getElementById('startBtn').onclick = () => { stage = 1; render(); };
          return;
        }

        // 2. –ö–ª–∏–∫–∏ –ø–æ —Å–≤–∏–Ω–∫–µ
        if (stage < maxClicks) {
          const container = document.createElement('div');
          container.className = 'piggy-container' + (shaking ? ' shake' : '');
          container.textContent = 'üê∑';
          container.onclick = () => {
            shaking = true;
            setTimeout(() => { shaking = false; render(); }, 200);
            stage++;
            render();
          };

          app.append(
            Object.assign(document.createElement('p'), { textContent: '–ù–∞–∂–∏–º–∞–π –Ω–∞ —Å–≤–∏–Ω–∫—É, —á—Ç–æ–±—ã –æ–Ω–∞ –æ—Ç–¥–∞–ª–∞ —Ç–µ–±–µ –ø–æ–¥–∞—Ä–æ–∫' }),
            container
          );

          // —Ç—Ä–µ—â–∏–Ω—ã
          for (let i = 0; i < stage; i++) {
            const line = document.createElement('div');
            line.className = 'crack-line';
            const angle = Math.random() * 60 - 30;
            const offset = Math.random() * 40 - 20;
            line.style.transform = `translateX(${offset}px) rotate(${angle}deg)`;
            line.style.opacity = (0.2 + i * (0.6 / maxClicks)).toFixed(2);
            container.append(line);
          }
          return;
        }

        // 3. –§–∏–Ω–∞–ª
        app.innerHTML = `
          <h2>üéâ –£—Ä–∞! –ü–æ–¥–∞—Ä–æ–∫ –≥–æ—Ç–æ–≤!</h2>
          <p>–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π QR-–∫–æ–¥, —á—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫</p>
          <img class="qr" src="https://sbpqr.nspk.ru/QRGenerator/images/qr_example.png" alt="QR-–∫–æ–¥">
          <div class="messages">
            <h3>–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥—ã üíå</h3>
            <p>‚Ä¢ –¢—ã –ª—É—á—à–∏–π! –£–¥–∞—á–∏ –≤ —Å–µ–º–µ–π–Ω–æ–π –∂–∏–∑–Ω–∏ ‚Äî –ö–∞—Ç—è üôå</p>
            <p>‚Ä¢ –° –ª—é–±–æ–≤—å—é –∏ —Ç–µ–ø–ª–æ–º! ‚Äî –ò—Ä–∏–Ω–∞ üíê</p>
            <p>‚Ä¢ –ü—É—Å—Ç—å –≤ –¥–æ–º–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –º–∏—Ä ‚Äî –°–∞—à–∞ ‚òÄÔ∏è</p>
          </div>
        `;
      }

      render();
    })();
  </script>

</body>
</html>
